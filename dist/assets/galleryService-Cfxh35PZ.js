import{d as a,s as t}from"./index-Bc6h3JDl.js";import{q as s,m as r,p as e,n as o,v as i,w as n,x as c,l as d,t as l,d as g,z as w}from"./vendor-firebase-DEvV9JSG.js";import{d as m}from"./dataCache-BlbMQbVs.js";const y="gallery",h=async s=>{try{const e=`gallery/${Date.now()}_${s.name}`,o=i(t,e);await n(o,s);const l=await c(o),g=await d(r(a,y),{imageUrl:l,storagePath:e,createdAt:(new Date).toISOString()});return m.invalidate("gallery"),{id:g.id,imageUrl:l,storagePath:e}}catch(e){throw e}},p=async()=>{try{const t=m.get("gallery");if(t)return t;const i=s(r(a,y),e("createdAt","desc")),n=(await o(i)).docs.map(a=>({id:a.id,...a.data()}));return m.set("gallery",n),n}catch(t){throw t}},f=async(s,r)=>{try{await l(g(a,y,s));const e=i(t,r);return await w(e),!0}catch(e){throw e}};export{f as d,p as g,h as u};
