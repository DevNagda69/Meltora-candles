import{r as e,j as a,K as s,I as l,m as t}from"./vendor-react-core-Bq0KXPxd.js";import{g as i,u as r,d}from"./galleryService--9XFQKpZ.js";import{A as o}from"./AdminLayout-BFGvbT9r.js";import"./vendor-misc-DR8gDw69.js";import"./index-DJL7qJUu.js";import"./vendor-firebase-DEvV9JSG.js";import"./dataCache-BlbMQbVs.js";const c=()=>{const[c,n]=e.useState([]),[m,g]=e.useState(!0),[y,p]=e.useState(!1);e.useEffect(()=>{u()},[]);const u=async()=>{try{const e=await i();n(e)}catch(e){alert("Failed to load gallery images")}finally{g(!1)}};return a.jsx(o,{title:"Instagram Gallery",children:a.jsxs("div",{className:"admin-gallery",children:[a.jsx("p",{className:"gallery-description",children:"Manage images displayed in the Instagram gallery section"}),a.jsxs("div",{className:"upload-section",children:[a.jsxs("label",{htmlFor:"gallery-upload",className:"upload-button",children:[a.jsx(s,{}),y?"Uploading...":"Upload Image"]}),a.jsx("input",{id:"gallery-upload",type:"file",accept:"image/*",onChange:async e=>{const a=e.target.files[0];if(a)if(a.type.startsWith("image/"))if(a.size>5242880)alert("Image size should be less than 5MB");else{p(!0);try{const e=await r(a);n([e,...c]),alert("Image uploaded successfully!")}catch(s){alert("Failed to upload image")}finally{p(!1),e.target.value=""}}else alert("Please upload an image file")},disabled:y,style:{display:"none"}}),a.jsx("p",{className:"upload-hint",children:"Recommended: Square images (1:1 ratio), max 5MB"})]}),m?a.jsx("div",{className:"loading-state",children:"Loading gallery..."}):0===c.length?a.jsxs("div",{className:"empty-state",children:[a.jsx(l,{size:48}),a.jsx("p",{children:"No images yet"}),a.jsx("p",{className:"text-muted",children:"Upload your first gallery image"})]}):a.jsx("div",{className:"gallery-grid",children:c.map(e=>a.jsxs("div",{className:"gallery-item",children:[a.jsx("img",{src:e.imageUrl,alt:"Gallery"}),a.jsx("div",{className:"gallery-item-overlay",children:a.jsx("button",{onClick:()=>(async(e,a)=>{if(confirm("Are you sure you want to delete this image?"))try{await d(e,a),n(c.filter(a=>a.id!==e)),alert("Image deleted successfully!")}catch(s){alert("Failed to delete image")}})(e.id,e.storagePath),className:"delete-button",title:"Delete image",children:a.jsx(t,{})})})]},e.id))})]})})};export{c as default};
