import{r as e,j as s,c as l,n,o as a,v as c,w as i,u as r,x as t,F as o}from"./vendor-react-core-Bq0KXPxd.js";import{P as d}from"./ProductCard-CIXxVNTl.js";import{B as h}from"./index-Bc6h3JDl.js";import{a as u}from"./productService-CoEyuARZ.js";import{p as m}from"./products-BluC3tZJ.js";import"./vendor-misc-DR8gDw69.js";import"./vendor-firebase-DEvV9JSG.js";import"./dataCache-BlbMQbVs.js";const x=({isOpen:i,onClose:r,filters:t,setFilters:o})=>{var d,u;const[m,x]=e.useState({collection:!0,scent:!0,price:!0,size:!1,availability:!1}),p=e=>{x(s=>({...s,[e]:!s[e]}))},j=(e,s)=>{o(l=>{const n=l[e]||[],a=n.includes(s)?n.filter(e=>e!==s):[...n,s];return{...l,[e]:a}})},v=e=>{const{name:s,value:l}=e.target;o(e=>({...e,priceRange:{...e.priceRange,[s]:parseInt(l)||0}}))};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"filter-overlay "+(i?"open":""),onClick:r}),s.jsxs("aside",{className:"filter-sidebar "+(i?"open":""),children:[s.jsxs("div",{className:"filter-header",children:[s.jsx("h3",{children:"Filters"}),s.jsx("button",{className:"close-btn hidden-desktop",onClick:r,children:s.jsx(l,{})})]}),s.jsxs("div",{className:"filter-content",children:[s.jsxs("div",{className:"filter-section",children:[s.jsxs("button",{className:"filter-toggle",onClick:()=>p("collection"),children:[s.jsx("span",{children:"Collection"}),m.collection?s.jsx(n,{}):s.jsx(a,{})]}),m.collection&&s.jsx("div",{className:"filter-options",children:["Signature","Seasonal","Limited Edition","Gift Sets"].map(e=>{var l;return s.jsxs("label",{className:"checkbox-label",children:[s.jsx("input",{type:"checkbox",checked:(null==(l=t.collection)?void 0:l.includes(e))||!1,onChange:()=>j("collection",e)}),s.jsx("span",{className:"checkbox-custom",children:s.jsx(c,{})}),s.jsx("span",{className:"checkbox-text",children:e})]},e)})})]}),s.jsxs("div",{className:"filter-section",children:[s.jsxs("button",{className:"filter-toggle",onClick:()=>p("scent"),children:[s.jsx("span",{children:"Scent Profile"}),m.scent?s.jsx(n,{}):s.jsx(a,{})]}),m.scent&&s.jsx("div",{className:"filter-options",children:["Floral","Woody","Fresh","Sweet","Citrus","Spicy"].map(e=>{var l;return s.jsxs("label",{className:"checkbox-label",children:[s.jsx("input",{type:"checkbox",checked:(null==(l=t.scent)?void 0:l.includes(e))||!1,onChange:()=>j("scent",e)}),s.jsx("span",{className:"checkbox-custom",children:s.jsx(c,{})}),s.jsx("span",{className:"checkbox-text",children:e})]},e)})})]}),s.jsxs("div",{className:"filter-section",children:[s.jsxs("button",{className:"filter-toggle",onClick:()=>p("price"),children:[s.jsx("span",{children:"Price Range"}),m.price?s.jsx(n,{}):s.jsx(a,{})]}),m.price&&s.jsx("div",{className:"filter-options",children:s.jsxs("div",{className:"price-inputs",children:[s.jsxs("div",{className:"price-input-group",children:[s.jsx("span",{className:"currency-symbol",children:"₹"}),s.jsx("input",{type:"number",name:"min",placeholder:"Min",value:(null==(d=t.priceRange)?void 0:d.min)||"",onChange:v})]}),s.jsx("span",{className:"price-separator",children:"-"}),s.jsxs("div",{className:"price-input-group",children:[s.jsx("span",{className:"currency-symbol",children:"₹"}),s.jsx("input",{type:"number",name:"max",placeholder:"Max",value:(null==(u=t.priceRange)?void 0:u.max)||"",onChange:v})]})]})})]}),s.jsxs("div",{className:"filter-section",children:[s.jsxs("button",{className:"filter-toggle",onClick:()=>p("size"),children:[s.jsx("span",{children:"Size"}),m.size?s.jsx(n,{}):s.jsx(a,{})]}),m.size&&s.jsx("div",{className:"filter-options",children:["Small (100g)","Medium (200g)","Large (400g)"].map(e=>{var l;return s.jsxs("label",{className:"checkbox-label",children:[s.jsx("input",{type:"checkbox",checked:(null==(l=t.size)?void 0:l.includes(e))||!1,onChange:()=>j("size",e)}),s.jsx("span",{className:"checkbox-custom",children:s.jsx(c,{})}),s.jsx("span",{className:"checkbox-text",children:e})]},e)})})]})]}),s.jsxs("div",{className:"filter-footer",children:[s.jsx(h,{variant:"secondary",size:"small",onClick:()=>o({}),className:"w-full mb-2",children:"Clear All"}),s.jsx(h,{variant:"primary",size:"small",onClick:r,className:"w-full hidden-desktop",children:"Apply Filters"})]})]})]})},p=({currentSort:l,onSortChange:n})=>{var a;const[r,t]=e.useState(!1),o=e.useRef(null),d=[{value:"popularity",label:"Most Popular"},{value:"newest",label:"New Arrivals"},{value:"price-low",label:"Price: Low to High"},{value:"price-high",label:"Price: High to Low"},{value:"rating",label:"Highest Rated"}];e.useEffect(()=>{const e=e=>{o.current&&!o.current.contains(e.target)&&t(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const h=(null==(a=d.find(e=>e.value===l))?void 0:a.label)||"Sort By";return s.jsxs("div",{className:"sort-dropdown",ref:o,children:[s.jsxs("button",{className:"sort-trigger "+(r?"active":""),onClick:()=>t(!r),children:[s.jsx("span",{className:"sort-label",children:"Sort by:"}),s.jsx("span",{className:"sort-value",children:h}),s.jsx(i,{className:"sort-icon "+(r?"rotate":"")})]}),r&&s.jsx("div",{className:"sort-menu fade-in",children:d.map(e=>s.jsxs("button",{className:"sort-option "+(l===e.value?"selected":""),onClick:()=>{return s=e.value,n(s),void t(!1);var s},children:[e.label,l===e.value&&s.jsx(c,{})]},e.value))})]})},j=()=>{const[l,n]=e.useState([]),[a,c]=e.useState(!0),[i,h]=e.useState(!1),[j,v]=e.useState(""),[g,N]=e.useState("popularity"),[b,f]=e.useState({collection:[],scent:[],priceRange:{min:0,max:0},size:[],availability:[]}),[y,C]=e.useState(6),k=r();e.useEffect(()=>{(async()=>{try{const e=await u();n(e.length>0?e:m)}catch(e){n(m)}finally{c(!1)}})()},[]),e.useEffect(()=>{new URLSearchParams(k.search).get("category")},[k.search]);const S=e.useMemo(()=>l.filter(e=>{var s,l,n,a,c;if(j&&!e.name.toLowerCase().includes(j.toLowerCase()))return!1;if((null==(s=b.collection)?void 0:s.length)>0&&!b.collection.includes(e.collection))return!1;if((null==(l=b.scent)?void 0:l.length)>0&&!b.scent.includes(e.scent))return!1;if((null==(n=b.size)?void 0:n.length)>0&&!b.size.includes(e.size))return!1;const i=e.salePrice||e.price;return!((null==(a=b.priceRange)?void 0:a.min)>0&&i<b.priceRange.min)&&!((null==(c=b.priceRange)?void 0:c.max)>0&&i>b.priceRange.max)}).sort((e,s)=>{const l=e.salePrice||e.price,n=s.salePrice||s.price;switch(g){case"price-low":return l-n;case"price-high":return n-l;case"newest":return(s.isNew?1:0)-(e.isNew?1:0);case"rating":return s.rating-e.rating;default:return s.reviews-e.reviews}}),[l,b,j,g]);return s.jsxs("div",{className:"page-shop",children:[s.jsx("div",{className:"shop-header-section section-sm bg-light",children:s.jsxs("div",{className:"container text-center",children:[s.jsx("h1",{className:"mb-2",children:"Shop All Candles"}),s.jsx("p",{className:"text-muted",children:"Discover our complete collection of hand-poured luxury candles."})]})}),s.jsxs("div",{className:"container shop-container section",children:[s.jsxs("div",{className:"shop-toolbar",children:[s.jsxs("button",{className:"filter-toggle-btn hidden-desktop",onClick:()=>h(!0),children:[s.jsx(t,{})," Filters"]}),s.jsxs("div",{className:"search-bar",children:[s.jsx(o,{}),s.jsx("input",{type:"text",placeholder:"Search candles...",value:j,onChange:e=>v(e.target.value)})]}),s.jsx("div",{className:"sort-wrapper hidden-mobile",children:s.jsx(p,{currentSort:g,onSortChange:N})})]}),s.jsxs("div",{className:"shop-layout",children:[s.jsx("div",{className:"shop-sidebar-wrapper "+(i?"open":""),children:s.jsx(x,{isOpen:i,onClose:()=>h(!1),filters:b,setFilters:f})}),s.jsxs("div",{className:"shop-content",children:[s.jsxs("div",{className:"results-count mb-4 flex justify-between items-center",children:[s.jsxs("span",{children:["Showing ",S.length," results"]}),s.jsx("div",{className:"hidden-desktop",children:s.jsx(p,{currentSort:g,onSortChange:N})})]}),S.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"products-grid grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:S.slice(0,y).map(e=>s.jsx(d,{product:e},e.id))}),y<S.length&&s.jsx("div",{className:"load-more flex justify-center mt-12",children:s.jsx("button",{className:"btn btn-secondary",onClick:()=>C(e=>e+6),children:"Load More"})})]}):s.jsxs("div",{className:"no-results text-center py-12",children:[s.jsx("h3",{children:"No products found"}),s.jsx("p",{children:"Try adjusting your filters or search query."}),s.jsx("button",{className:"btn btn-secondary mt-4",onClick:()=>{f({}),v("")},children:"Clear All Filters"})]})]})]})]})]})};export{j as default};
