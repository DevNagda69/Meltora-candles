import{r as s,j as e,y as a,n as i,o as c,A as t,C as r,D as n,k as l}from"./vendor-react-core-Bq0KXPxd.js";import{u as d,B as o}from"./index-DJL7qJUu.js";import{P as m}from"./ProductCard-DSCE7m4s.js";import{a as j}from"./productService-Jp0TKj0F.js";import{p as h}from"./products-BAOAWJAT.js";import"./vendor-misc-DR8gDw69.js";import"./vendor-firebase-DEvV9JSG.js";import"./dataCache-BlbMQbVs.js";const p=({images:a=[]})=>{const[i,c]=s.useState(a[0]),[t,r]=s.useState({});return a.length?e.jsxs("div",{className:"product-gallery",children:[e.jsxs("div",{className:"main-image-container",onMouseMove:s=>{const{left:e,top:a,width:i,height:c}=s.target.getBoundingClientRect(),t=(s.clientX-e)/i*100,n=(s.clientY-a)/c*100;r({transformOrigin:`${t}% ${n}%`,transform:"scale(2)"})},onMouseLeave:()=>{r({transformOrigin:"center center",transform:"scale(1)"})},children:[e.jsx("img",{src:i,alt:"Product Detail",className:"main-image",style:t}),e.jsx("div",{className:"zoom-hint hidden-mobile",children:"Roll over image to zoom in"})]}),a.length>1&&e.jsx("div",{className:"thumbnails-row",children:a.map((s,a)=>e.jsx("button",{className:"thumbnail-btn "+(i===s?"active":""),onClick:()=>c(s),children:e.jsx("img",{src:s,alt:`View ${a+1}`})},a))})]}):null},u=({product:s,price:i})=>e.jsxs("div",{className:"product-info-container",children:[e.jsxs("div",{className:"product-header",children:[e.jsxs("span",{className:"product-collection",children:[s.collection," Collection"]}),e.jsx("h1",{className:"product-title",children:s.name}),e.jsxs("div",{className:"product-meta",children:[e.jsxs("div",{className:"rating-container",children:[e.jsx("div",{className:"stars",children:[...Array(5)].map((i,c)=>e.jsx(a,{className:c<Math.floor(s.rating)?"star-filled":"star-empty"},c))}),e.jsxs("span",{className:"review-count",children:["(",s.reviews," Reviews)"]})]}),e.jsx("span",{className:"stock-status",children:s.stock>0?e.jsx("span",{className:"text-success",children:"In Stock"}):e.jsx("span",{className:"text-error",children:"Out of Stock"})})]}),e.jsxs("div",{className:"product-price-large",children:["‚Çπ",i]})]}),e.jsx("div",{className:"product-description",children:e.jsx("p",{children:s.description})}),e.jsxs("div",{className:"product-details-accordion",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Scent Profile"}),e.jsx("p",{children:s.scent})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Ingredients"}),e.jsx("p",{children:s.ingredients})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Burn Time"}),e.jsx("p",{children:s.burnTime})]})]})]}),x=({variations:s,selections:a,onSelectionChange:i})=>s?e.jsxs("div",{className:"variations-container",children:[s.sizes&&e.jsxs("div",{className:"variation-group",children:[e.jsx("label",{className:"variation-label",children:"Size"}),e.jsx("div",{className:"options-grid",children:s.sizes.map(s=>e.jsxs("button",{className:"option-btn "+(a.size===s.value?"selected":""),onClick:()=>i("size",s.value),children:[e.jsx("span",{className:"option-text",children:s.label}),0!==s.priceAdjustment&&e.jsxs("span",{className:"option-price",children:[s.priceAdjustment>0?"+":"","‚Çπ",s.priceAdjustment]})]},s.value))})]}),s.fragrances&&e.jsxs("div",{className:"variation-group",children:[e.jsx("label",{className:"variation-label",children:"Fragrance Note"}),e.jsx("div",{className:"options-list",children:s.fragrances.map(s=>e.jsx("button",{className:"text-option-btn "+(a.fragrance===s?"selected":""),onClick:()=>i("fragrance",s),children:s},s))})]})]}):null,v=({product:a,selections:n,currentPrice:l})=>{const[m,j]=s.useState(1),{addToCart:h}=d(),[p,u]=s.useState(!1);return e.jsxs("div",{className:"add-to-cart-container",children:[e.jsxs("div",{className:"quantity-wrapper",children:[e.jsx("label",{children:"Quantity"}),e.jsxs("div",{className:"quantity-selector",children:[e.jsx("button",{className:"qty-btn",onClick:()=>{m>1&&j(s=>s-1)},disabled:m<=1,children:e.jsx(i,{})}),e.jsx("span",{className:"qty-value",children:m}),e.jsx("button",{className:"qty-btn",onClick:()=>{a.stock&&m>=a.stock||j(s=>s+1)},disabled:a.stock&&m>=a.stock,children:e.jsx(c,{})})]})]}),e.jsxs("div",{className:"actions-wrapper",children:[e.jsxs("div",{className:"main-actions",children:[e.jsx(o,{variant:"primary",className:"flex-grow",onClick:()=>{u(!0),setTimeout(()=>{h(a,m,{...n,price:l}),u(!1)},500)},loading:p,disabled:0===a.stock,children:0===a.stock?"Out of Stock":"Add to Cart"}),e.jsx(o,{variant:"dark",className:"flex-grow",onClick:()=>{h(a,m,{...n,price:l})},disabled:0===a.stock,children:"Buy Now"})]}),e.jsxs("div",{className:"secondary-actions",children:[e.jsxs("button",{className:"icon-action-btn",children:[e.jsx(t,{})," Add to Wishlist"]}),e.jsxs("button",{className:"icon-action-btn",children:[e.jsx(r,{})," Share"]})]})]})]})},N=({currentProduct:a})=>{const[i,c]=s.useState([]);return s.useEffect(()=>{(async()=>{if(a)try{const s=(await j()).filter(s=>s.category===a.category&&s.id!==a.id).slice(0,4);c(s)}catch(s){}})()},[a]),0===i.length?null:e.jsxs("div",{className:"related-products",children:[e.jsx("h3",{className:"text-2xl font-heading text-dark-brown mb-8 text-center",children:"You May Also Like"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:i.map(s=>e.jsx(m,{product:s},s.id))})]})},g=()=>{const{id:a}=n(),i=l(),[c,t]=s.useState(null),[r,d]=s.useState(!0),[o,m]=s.useState({size:"Medium (200g)",fragrance:""}),[j,g]=s.useState(0);if(s.useEffect(()=>{d(!0),setTimeout(()=>{const s=h.find(s=>s.id===parseInt(a));s&&(t(s),m(e=>({...e,fragrance:s.scent})),g(s.salePrice||s.price)),d(!1)},300),window.scrollTo(0,0)},[a]),r)return e.jsx("div",{className:"loading-container section",children:e.jsx("div",{className:"loading"})});if(!c)return e.jsxs("div",{className:"container section text-center",children:[e.jsx("h2",{children:"Product not found"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>i("/shop"),children:"Return to Shop"})]});const f={sizes:[{value:"Small (100g)",label:"Small",priceAdjustment:-200},{value:"Medium (200g)",label:"Medium",priceAdjustment:0},{value:"Large (400g)",label:"Large",priceAdjustment:400}]},b=c.images?c.images:[c.image];return e.jsx("div",{className:"page-product-details section",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"product-layout",children:[e.jsx("div",{className:"product-gallery-wrapper",children:e.jsx(p,{images:b})}),e.jsxs("div",{className:"product-info-wrapper",children:[e.jsx(u,{product:c,price:j}),e.jsx(x,{variations:f,selections:o,onSelectionChange:(s,e)=>{if(m(a=>({...a,[s]:e})),"size"===s){const s=f.sizes.find(s=>s.value===e),a=c.salePrice||c.price;g(a+(s?s.priceAdjustment:0))}}}),e.jsx(v,{product:c,selections:o,currentPrice:j}),e.jsxs("div",{className:"product-policies",children:[e.jsxs("div",{className:"policy-item",children:[e.jsx("span",{className:"policy-icon",children:"üöö"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Free Shipping"}),e.jsx("p",{children:"On orders above ‚Çπ999"})]})]}),e.jsxs("div",{className:"policy-item",children:[e.jsx("span",{className:"policy-icon",children:"‚Ü©Ô∏è"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Easy Returns"}),e.jsx("p",{children:"7-day replacement policy"})]})]})]})]})]}),e.jsx(N,{currentProductId:a,category:c.category})]})})};export{g as default};
