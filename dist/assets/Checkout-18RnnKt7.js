import{k as e,r as s,j as a,z as r}from"./vendor-react-core-Bq0KXPxd.js";import{u as i,B as t,d as l}from"./index-DJL7qJUu.js";import{k as n,l as c,m as d}from"./vendor-firebase-DEvV9JSG.js";import"./vendor-misc-DR8gDw69.js";const m=()=>{const{cartItems:m,getCartTotal:o}=i(),h=e(),[u,p]=s.useState(!1),[x,j]=s.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",pincode:"",notes:""}),v=e=>{const{name:s,value:a}=e.target;j(e=>({...e,[s]:a}))},N=o(),y=N>999?0:99,g=N+y;return 0===m.length?a.jsxs("div",{className:"section container text-center",children:[a.jsx("h2",{children:"Your cart is empty"}),a.jsx(t,{variant:"primary",onClick:()=>h("/shop"),children:"Return to Shop"})]}):a.jsx("div",{className:"page-checkout section-sm",children:a.jsxs("div",{className:"container",children:[a.jsx("h1",{className:"checkout-title",children:"Checkout"}),a.jsxs("div",{className:"checkout-layout",children:[a.jsxs("div",{className:"checkout-form-wrapper",children:[a.jsx("h3",{className:"section-header",children:"Shipping Information"}),a.jsxs("form",{id:"checkout-form",onSubmit:async e=>{if(e.preventDefault(),0!==m.length){p(!0);try{const e={items:m.map(e=>{var s,a;return{id:e.id,name:e.name,price:(null==(s=e.selectedVariation)?void 0:s.price)||e.price,quantity:e.quantity,size:(null==(a=e.selectedVariation)?void 0:a.size)||""}}),shipping:x,subtotal:N,shippingFee:y,total:g,status:"Pending",createdAt:n()};await c(d(l,"orders"),e),r.success("Order placed successfully!"),h("/")}catch(s){r.error("Failed to place order. Please try again.")}finally{p(!1)}}else r.error("Your cart is empty")},children:[a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"First Name"}),a.jsx("input",{type:"text",name:"firstName",value:x.firstName,onChange:v,required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Last Name"}),a.jsx("input",{type:"text",name:"lastName",value:x.lastName,onChange:v,required:!0})]})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Email"}),a.jsx("input",{type:"email",name:"email",value:x.email,onChange:v,required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Phone"}),a.jsx("input",{type:"tel",name:"phone",value:x.phone,onChange:v,required:!0})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Address"}),a.jsx("input",{type:"text",name:"address",value:x.address,onChange:v,placeholder:"Street, locality, house number",required:!0})]}),a.jsxs("div",{className:"form-row",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"City"}),a.jsx("input",{type:"text",name:"city",value:x.city,onChange:v,required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Pincode"}),a.jsx("input",{type:"text",name:"pincode",value:x.pincode,onChange:v,required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"State"}),a.jsx("input",{type:"text",name:"state",value:x.state,onChange:v,required:!0})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Order Notes (Optional)"}),a.jsx("textarea",{name:"notes",value:x.notes,onChange:v,rows:"3"})]})]})]}),a.jsx("div",{className:"checkout-summary-wrapper",children:a.jsxs("div",{className:"checkout-summary card",children:[a.jsx("h3",{className:"summary-header",children:"Order Summary"}),a.jsx("div",{className:"summary-items",children:m.map(e=>{var s,r;return a.jsxs("div",{className:"summary-item",children:[a.jsxs("div",{className:"summary-item-info",children:[a.jsxs("div",{className:"summary-img",children:[a.jsx("img",{src:e.image,alt:e.name}),a.jsx("span",{className:"qty-badge",children:e.quantity})]}),a.jsxs("div",{children:[a.jsx("h4",{children:e.name}),a.jsx("span",{className:"text-xs text-muted",children:(null==(s=e.selectedVariation)?void 0:s.size)||""})]})]}),a.jsxs("div",{className:"summary-item-price",children:["â‚¹",((null==(r=e.selectedVariation)?void 0:r.price)||e.price)*e.quantity]})]},e.uniqueId)})}),a.jsxs("div",{className:"summary-costs",children:[a.jsxs("div",{className:"cost-row",children:[a.jsx("span",{children:"Subtotal"}),a.jsxs("span",{children:["â‚¹",N]})]}),a.jsxs("div",{className:"cost-row",children:[a.jsx("span",{children:"Shipping"}),a.jsx("span",{children:0===y?"Free":`â‚¹${y}`})]}),a.jsxs("div",{className:"cost-row total",children:[a.jsx("span",{children:"Total"}),a.jsxs("span",{children:["â‚¹",g]})]})]}),a.jsx(t,{type:"submit",form:"checkout-form",variant:"primary",loading:u,className:"w-full mt-4",children:"Place Order"}),a.jsx("p",{className:"secure-notice text-center mt-4",children:"ðŸ”’ Secure Checkout with Razorpay"})]})})]})]})})};export{m as default};
